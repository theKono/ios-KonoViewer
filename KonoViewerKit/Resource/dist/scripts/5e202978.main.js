"use strict";function adjustDivFontSize(b){adjustFontSize("banner-main-title",b);adjustFontSize("banner-sub-title",b);adjustFontSize("row article-metadata",b);adjustFontSize("row intro-section",b);adjustFontSize("section-subtitle",b);adjustFontSize("media-title",b);adjustFontSize("media-description",b);adjustFontSize("content-text",b);adjustFontSize("misc-subtitle",b);adjustFontSize("magazine-name",b);adjustFontSize("magazine-description",b);}function adjustFontSize(a,b){var obj = document.getElementsByClassName(a);for(var i=0 ; i<obj.length;i++){var element = obj[i];var style = window.getComputedStyle(element, null).getPropertyValue('font-size');var lineStyle = window.getComputedStyle(element, null).getPropertyValue('line-height');var fontSize = parseFloat(style);var lineHeight = parseFloat(lineStyle);element.style.fontSize=(fontSize+b)+'px';element.style.lineHeight=(lineHeight+b)+'px';}}function setAPIURL(a){API_URL=a}function setDeviceType(a){DEVICE_IS_IPAD=a}function responsive_image(a){var b=$("<img>");return b.attr("src",a),b.attr("class","img-responsive"),b.attr("alt","image"),b}function load_kono_request(){var a=document.createElement("IFRAME");a.setAttribute("src","kono://template_load_finished/"),document.documentElement.appendChild(a),a.parentNode.removeChild(a),a=null}function getParameterByName(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))}var API_URL="https://api.thekono.com/KPI2",IS_ONLINE=1,DEVICE_IS_IPAD=0,ARTICLE_IMAGE_URL="https://api.thekono.com/KPI2",open_article=function(a,b,c){IS_ONLINE=b,ARTICLE_IMAGE_URL=c,$.get("template/article-template.html",function(b){var c=Handlebars.compile(b),d=c(a);$("#template-body").html(d),$("#banner img").each(function(){$(this).load(function(){var a=this.width,b=this.height,c=$("#banner").width(),d=$("#banner").height();$(this).addClass(a/c>b/d?"landscape-image":"vertical-image")})})})},open_article_file=function(a){$.get(a,function(a){open_article(a,1,"https://api.thekono.com/KPI2")})},open_preview=function(a){clearContent(),$.get("template/preview-template.html",function(b){var c=b,d=Handlebars.compile(c),e=d(a);$("#template-body").html(e),$("#banner img").each(function(){$(this).load(function(){var a=this.width,b=this.height,c=$("#banner").width(),d=$("#banner").height();$(this).addClass(a/c>b/d?"landscape-image":"vertical-image")})})})},show_loading_for_action_btn=function(){var a={lines:13,length:3,width:2,radius:4,corners:1,rotate:0,direction:1,color:"#FFF",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"};$(".preview_action_btn").html("<div id='action_btn_loading_indicator'></div>");var b=document.getElementById("action_btn_loading_indicator");b.setAttribute("style","margin: 10px 50%; ");new Spinner(a).spin(b)},setActionBtnTitle=function(a){$(".preview_action_btn").text(a)},open_preview_file=function(a){$.get(a,function(a){open_preview(a)})},open_magazine_file=function(a){$.get("template/magazine-template.html",function(b){var c=b,d=Handlebars.compile(c);$.get(a,function(a){a.magazineImage=API_URL+"/magazines/"+a.bid+"/image/small";var b=d(a);$("#magazine-section").html(b)})})},open_magazine=function(a){$.get("template/magazine-template.html",function(b){var c=b,d=Handlebars.compile(c);a.magazineImage=a.magazineCover;var e=d(a);$("#magazine-section").html(e)})},open_related_artiel_file=function(a){$.get("template/related-article-template.html",function(b){Handlebars.compile(b);$.get(a,function(a){open_related_article(a)})})},open_related_article=function(a){$.get("template/related-article-template.html",function(b){var c=Handlebars.compile(b),d=c(a);$("#related-article-section").html(d),$("#related-article-section .article-cell img").each(function(){$(this).load(function(){var a=this.width,b=this.height;$(this).addClass(b>a?"vertical-image":"landscape-image")})})})},setImageResponsive=function(a){a.each(function(){$(this).load(function(){var a=this.width,b=this.height;$(this).addClass(b>a?"landscape-image":"vertical-image")})})},clearContent=function(){$("#template-body").html("<div id='loading-indicator'></div>"),$("#magazine-section").html(""),$("#related-article-section").html("");{var a={lines:13,length:5,width:3,radius:10,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},b=document.getElementById("loading-indicator");new Spinner(a).spin(b)}};$(document).ready(function(){Handlebars.registerHelper("articleImageURL",function(a){return 1==DEVICE_IS_IPAD?API_URL+"/articles/"+a+"/main_image?size=medium&crop=9:5":API_URL+"/articles/"+a+"/main_image?size=medium&crop=4:3"}),Handlebars.registerHelper("imageURL",function(a){return console.log("is online : "+IS_ONLINE),console.log("API url "+ARTICLE_IMAGE_URL),1==IS_ONLINE?ARTICLE_IMAGE_URL+"/images/"+a:ARTICLE_IMAGE_URL+"/"+a+".jpg"}),Handlebars.registerHelper("magazineImageURL",function(a){return API_URL+"/magazines/"+a+"/cover/medium"}),Handlebars.registerHelper("timestampToDate",function(a){var b=new Date(1e3*a),c=b.getFullYear(),d=b.getMonth(),e=b.getDay(),f=c+"/"+d+"/"+e;return f}),Handlebars.registerHelper("videoURL",function(a,b,c){return API_URL+"/videos/"+a+"/playback?reader_id="+b+"&access_token="+c}),Handlebars.registerHelper("videoRatio",function(a,b){var ratio = a/b*100;return "padding-bottom:"+ratio+"%"}),Handlebars.registerHelper("videoPreview",function(a){return API_URL+"/videos/"+a+"/thumbnail/medium"}),Handlebars.registerHelper("audioURL",function(a,b,c){return API_URL+"/audios/"+a+"/playback?reader_id="+b+"&access_token="+c}),clearContent(),load_kono_request()});